---
title: Development Gateway
sidebar_position: 15
---

# Development Gateway

DeviceScript defines a [cloud layer](/developer/cloud/)
to abstract the communication between the device and a cloud provider.

In order to facilite rapid prototyping, it is possible to provision a **Development Gateway** to
support a few devices in your Azure subscription.

** The gateway is still under heavy development **

-   Full sources at https://github.com/microsoft/devicescript-gateway

### Features

-   Device provisioning, management: register, unregister, list, ...
-   Script management: create, update (versioned)
-   Script deployment: assign a script to a device and the gateway will deploy it
-   Telemetry and cloud methods
-   Swagger API front end for non-embedded clients

### Limitations

-   The Development Gateway is not meant for production deployment.
-   The Development Gateway is meant to handle a few devices, say less than 100.

## Architecture

The Development Gateway is built on top of a few Azure resources:

-   [App Service](https://learn.microsoft.com/en-us/azure/app-service/), runs a Node.JS web service with a swagger frontend
-   [Key Vault](https://learn.microsoft.com/en-us/azure/key-vault/), to store secrets needed by the Web Application
-   [Storage](https://learn.microsoft.com/en-us/azure/storage/), blobs and tables to manage devices, scripts and telemetry
-   [App Insights](https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview), to collect telemetry about the health of devices
-   [Event Hub](https://learn.microsoft.com/en-us/azure/event-hubs/) to forward telemetry messages from the devices to the next cloud service

For development,

-   [GitHub Actions](https://docs.github.com/en/actions), deploy the web application on each successful build

The Development Gateway requires an Azure and a GitHub account.

## Provisioning

-   install [Node.JS 18+](https://nodejs.org/en/download/)
    and the [Azure CLI](https://learn.microsoft.com/en-us/dotnet/azure/install-azure-cli).
-   fork https://github.com/microsoft/devicescript-gateway/

The full sources of the Gateway is available in that repository.

-   install the dependencies and pull the submodules

```bash npm2yarn
npm run setup
```

-   open a terminal with the Azure CLI logged in and the default subscription configured

```bash
az login
```

-   launch the provisioning script

```bash npm2yarn
npm run provision
```

-   You will need to generate a [Github personal access token](https://github.com/settings/personal-access-tokens/new)
    for the forked repository, with `actions`, `secrets` scope as `read+write`.

After the script is done executing,
it will take a couple minutes for the Github Actions to build the site and start it.

-   open the swagger page, `https://WEBAPPNAME.azurewebsites.net/swagger/` and make sure it loads

You will be able to continue the configuration of the gateway through the [VS Code extension](/getting-started/vscode),
`DeviceScript` view, `Development Gateway` section.

![Empty view](./empty-view.png)

## Deployment

The repository is configured to
deploy the site on every build on the `main` brain,
using the `build.yml` workflow.

The project `README.md` file contains details for local development.

## Cleanup

Use the Azure CLI to delete the resource group and all its associated resources.
