---
sidebar_position: 10
hide_table_of_contents: true
---

# Simulation

DeviceScript supports simulation through a Node.JS project running in parralel on the developer machine.
The Node.JS project uses the [Jacdac TypeScript client library](https://microsoft.github.io/jacdac-docs/clients/javascript/) and,
any other Node package (like your favorite test project).

The Node.JS simulator project is, by default, located under `/sim/` with `/sim/app.ts` as the entry point.

## `aurascope` example

This simulator sample starts a simulated `psychomagnotheric energy sensor` (custom service) using `jacdac-ts`.

```ts title="./sim/app.ts"
// Jacdac bus that will connect to the devtools server
import { bus } from "./runtime"
// Jacdac helper to simulate services
import { addServer, AnalogSensorServer } from "jacdac-ts"
// custom service
import { SRV_PSYCHOMAGNOTHERIC_ENERGY } from "../.devicescript/ts/constants"

// server for the custom service
const server = new AnalogSensorServer(SRV_PSYCHOMAGNOTHERIC_ENERGY, {
    readingValues: [0.5],
    readingError: [0.1],
    streamingInterval: 500,
})
// change level randomly
setInterval(() => {
    // randomly change the
    const newValue = server.reading.values()[0] + (0.5 - Math.random()) / 10
    server.reading.setValues([newValue])
    console.debug(`psycho value: ${newValue}`)
}, 100)
addServer(bus, "aurascope", server)
```
