---
sidebar_position: 15
---

# Cloud

The `@devicescript/cloud` package provides a cloud agnostic device to cloud API
that allows to send and receive small JSON messages to an online gateway.
The gateway can route the messages into any further cloud service.

As a proof of concept, DeviceScript can be connected to the [Development Gateway](/developer/gateway).

## Installation

Add `@devicescript/cloud` in your project.

```bash npm2yarn
npm install @devicescript/cloud
```

## Monitoring

You can collect usage telemetry of your DeviceScript using `trackEvent`.

```ts
import { trackEvent } from "@devicescript/cloud"

await trackEvent("started")
```

When connected to the gateway, the device is modelled as a user and the connection as a session.
The data is injected directly
in [Application Insights](https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview)
and can be analyzed through the Azure portal.

## Upload Message

DeviceScript will stringify and upload your object as a JSON payload. The gateway add this messages
into an [Azure Event Hub](https://azure.microsoft.com/en-us/products/event-hubs/), additonal sinks can be configured online.

```ts
import { uploadMessage } from "@devicescript/cloud"

await uploadMessage("topic", { msg: "hello" })
```

:::tip

Keep those field names very short as the payload needs to be small (<236 bytes).

:::
