---
title: Settings
sidebar_position: 9
description: Settings provides a friendly layer to read/write objects from the
    device flash. Keep it small, there's not a lot of space!
---

# Settings

Settings [builtin package](/developer/packages) provides a friendly layer to read/write objects from the device flash. **Keep it small, there's not a lot of space!**

## Usage

The settings store is cleared on each deployment. It is recommended to use the `readSetting` and `writeSetting` functions to access the settings store.
The functions are asynchronous and return a promise.

### `.env.defaults` and `.env.local` files

You can store general settings in `./.env.defaults` and secrets in the `./.env.local` file at the root of the project.
The file should be in the following format where the value can be any valid JSON (parsed automatically) or a string. This is similar to the [dotenv-flow](https://www.npmjs.com/package/dotenv-flow) package.

```env title="./.env.defaults"
# This file is tracked by git. DO NOT store secrets in this file.
TEMP=68
```

```env title="./.env.local"
# This file is **NOT** tracked by git and may contain secrets
PASSWORD=VALUE
TEMP=70 # override TEMP
```

The secrets can only be accessed by the DeviceScript program and are not available through the Jacdac protocol.

:::warning

Note that multiline values, and `#` in quote strings are not supported.

:::

### `readSetting`

Deserializes an object from a setting at a given key. If the key is missing or invalid format, returns undefined.

```ts
import { readSetting } from "@devicescript/settings"

// highlight-next-line
const { world } = await readSetting<{ world?: string }>("hello", {})
```

### `writeSetting`

Serializes an object into a setting at a given key. The key name should be less than 16 characters.

```ts
import { writeSetting } from "@devicescript/settings"

// highlight-next-line
await writeSetting("hello", { world: "world" })
```

## See also

-   [API reference](/api/settings/)
