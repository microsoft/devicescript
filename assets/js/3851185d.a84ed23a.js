"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[770],{35318:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(27378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=s(n),d=i,k=m["".concat(p,".").concat(d)]||m[d]||c[d]||r;return n?a.createElement(k,l(l({ref:t},u),{},{components:n})):a.createElement(k,l({ref:t},u))}));function k(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[m]="string"==typeof e?e:i,l[1]=o;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},42015:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=n(25773),i=(n(27378),n(35318));const r={description:"Learn about the supported and unsupported features of DeviceScript, a TypeScript subset designed for limited resources environments.",keywords:["DeviceScript","TypeScript subset","language features","supported features","unsupported features"]},l="DeviceScript Language",o={unversionedId:"language/index",id:"language/index",title:"DeviceScript Language",description:"Learn about the supported and unsupported features of DeviceScript, a TypeScript subset designed for limited resources environments.",source:"@site/docs/language/index.mdx",sourceDirName:"language",slug:"/language/",permalink:"/devicescript/language/",draft:!1,tags:[],version:"current",frontMatter:{description:"Learn about the supported and unsupported features of DeviceScript, a TypeScript subset designed for limited resources environments.",keywords:["DeviceScript","TypeScript subset","language features","supported features","unsupported features"]},sidebar:"tutorialSidebar",previous:{title:"Workshop",permalink:"/devicescript/samples/workshop/"},next:{title:"Async/await and promises",permalink:"/devicescript/language/async"}},p={},s=[{value:"TypeScript subset",id:"typescript-subset",level:2},{value:"Supported language features",id:"supported-language-features",level:3},{value:"Unsupported language features",id:"unsupported-language-features",level:3}],u={toc:s},m="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"devicescript-language"},"DeviceScript Language"),(0,i.kt)("p",null,"DeviceScript generally works just like TypeScript, unless the compiler tells you something is not supported."),(0,i.kt)("p",null,"The TypeScript sources are compiled to a ",(0,i.kt)("a",{parentName:"p",href:"/language/bytecode"},"bytecode"),"\nthat is then executed on the ",(0,i.kt)("a",{parentName:"p",href:"/language/runtime"},"DeviceScript runtime"),"."),(0,i.kt)("h2",{id:"typescript-subset"},"TypeScript subset"),(0,i.kt)("p",null,"DeviceScript is a subset of ",(0,i.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org"},"TypeScript"),".\nTypeScript itself follows semantics of ECMAScript also known as JavaScript (JS).\nDeviceScript generally also follows JavaScript semantics, and the DeviceScript compiler\nwill give you an error if you're using an unsupported feature."),(0,i.kt)("p",null,"Otherwise, there are some semantic differences stemming from the limited\nresources available to the DeviceScript runtime:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/language/async"},"programs run in multiple fibers"),"; ",(0,i.kt)("inlineCode",{parentName:"li"},"async"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"await")," are supported general ",(0,i.kt)("inlineCode",{parentName:"li"},"Promise")," is not"),(0,i.kt)("li",{parentName:"ul"},"user-defined ",(0,i.kt)("a",{parentName:"li",href:"/language/tostring"},".toString() method")," is limited"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/language/strings"},"strings are Unicode"),", not UTF-16, and some features are missing"),(0,i.kt)("li",{parentName:"ul"},"some objects, including functions, ",(0,i.kt)("a",{parentName:"li",href:"/language/special"},"are static or otherwise special"),", and cannot have random properties attached"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/language/tree-shaking"},"tree shaking")," is quite aggressive"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/language/hex"},"hex string template")," compiles hex string into flash-stored buffers"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/language/devicescript-vs-javascript"},"other differences")," include lack of subnormals")),(0,i.kt)("p",null,"Below we list supported and unsupported language features."),(0,i.kt)("h3",{id:"supported-language-features"},"Supported language features"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"variable declarations with ",(0,i.kt)("inlineCode",{parentName:"li"},"let"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"const")),(0,i.kt)("li",{parentName:"ul"},"functions with lexical scoping and recursion"),(0,i.kt)("li",{parentName:"ul"},"top-level code in the file; hello world really is ",(0,i.kt)("inlineCode",{parentName:"li"},'console.log("Hello world")')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"if ... else if ... else")," statements"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"while")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"do ... while")," loops"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"for(;;)")," loops"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"for ... of")," statements"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"for ... in")," statements (though they behave the same as ",(0,i.kt)("inlineCode",{parentName:"li"},"for ... of Object.keys(...)"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"break/continue"),"; also with labeled loops"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"switch")," statement (on numbers, strings, and arbitrary types - the last one isn't very useful)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"debugger")," statement for breakpoints"),(0,i.kt)("li",{parentName:"ul"},"conditional operator ",(0,i.kt)("inlineCode",{parentName:"li"},"? :"),"; lazy boolean operators"),(0,i.kt)("li",{parentName:"ul"},"all arithmetic operators (including bitwise operators)"),(0,i.kt)("li",{parentName:"ul"},"strings (with a few common methods)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals"},"string templates")," (",(0,i.kt)("inlineCode",{parentName:"li"},"`x is ${x}`"),")"),(0,i.kt)("li",{parentName:"ul"},"arrow functions ",(0,i.kt)("inlineCode",{parentName:"li"},"() => ..."),"; passing functions as values"),(0,i.kt)("li",{parentName:"ul"},"classes with inheritance, instance fields, methods and constructors; ",(0,i.kt)("inlineCode",{parentName:"li"},"new")," keyword"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"public"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"private")," annotations on constructor arguments (syntactic sugar to make them into fields); initializers for class fields"),(0,i.kt)("li",{parentName:"ul"},"enumerations (",(0,i.kt)("inlineCode",{parentName:"li"},"enum"),")"),(0,i.kt)("li",{parentName:"ul"},"generic classes, methods, and functions"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"typeof")," expression"),(0,i.kt)("li",{parentName:"ul"},"binding with arrays or objects: ",(0,i.kt)("inlineCode",{parentName:"li"},"let [a, b] = ...; let { x, y } = ...")),(0,i.kt)("li",{parentName:"ul"},"exceptions (",(0,i.kt)("inlineCode",{parentName:"li"},"throw"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"try ... catch"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"try ... finally"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"union")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"intersection")," types"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"delete")," statement"),(0,i.kt)("li",{parentName:"ul"},"array literals ",(0,i.kt)("inlineCode",{parentName:"li"},"[1, 2, 3]"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"[1, ...x, ...y, 2]")),(0,i.kt)("li",{parentName:"ul"},"object literals ",(0,i.kt)("inlineCode",{parentName:"li"},'{ foo: 1, bar: "two" }')),(0,i.kt)("li",{parentName:"ul"},"shorthand properties (",(0,i.kt)("inlineCode",{parentName:"li"},"{a, b: 1}")," parsed as ",(0,i.kt)("inlineCode",{parentName:"li"},"{a: a, b: 1}"),")"),(0,i.kt)("li",{parentName:"ul"},"computed property names (",(0,i.kt)("inlineCode",{parentName:"li"},"{[foo()]: 1, bar: 2}"),")"),(0,i.kt)("li",{parentName:"ul"},"spread and rest operators (in certain places)"),(0,i.kt)("li",{parentName:"ul"},"file-based modules (",(0,i.kt)("inlineCode",{parentName:"li"},"import * from ..."),", ",(0,i.kt)("inlineCode",{parentName:"li"},"import { foo } from ...")," etc)"),(0,i.kt)("li",{parentName:"ul"},"array/object destructuring in parameters and definitions (not in assignments yet)"),(0,i.kt)("li",{parentName:"ul"},"optional chaining (",(0,i.kt)("inlineCode",{parentName:"li"},"a?.b.c"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"foo.bar?.()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"foo?.[1]"),", etc)"),(0,i.kt)("li",{parentName:"ul"},"nullish coalescing operator (",(0,i.kt)("inlineCode",{parentName:"li"},"width ?? 240"),")"),(0,i.kt)("li",{parentName:"ul"},"static fields and methods in classes"),(0,i.kt)("li",{parentName:"ul"},"JSX is supported (though experimental) if you feel like developing an MCU-React!")),(0,i.kt)("h3",{id:"unsupported-language-features"},"Unsupported language features"),(0,i.kt)("p",null,"Things you may miss and we may implement:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"support of ",(0,i.kt)("inlineCode",{parentName:"li"},"enums")," as run-time arrays"),(0,i.kt)("li",{parentName:"ul"},"initializer for static fields"),(0,i.kt)("li",{parentName:"ul"},"method-like properties (get/set accessors)"),(0,i.kt)("li",{parentName:"ul"},"tagged templates ",(0,i.kt)("inlineCode",{parentName:"li"},"tag `text ${expression} more text` ")," are limited to special compiler features\nlike buffer literals; regular templates are supported")),(0,i.kt)("p",null,"Things that we are not very likely to implement due to the scope of the project\nor other constraints (note that if you don't know what a given feature is, you're\nunlikely to miss it):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"yield")," expression and ",(0,i.kt)("inlineCode",{parentName:"li"},"function*")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"with")," statement"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"eval")),(0,i.kt)("li",{parentName:"ul"},"namespaces (we do support ES modules)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"arguments")," keyword; ",(0,i.kt)("inlineCode",{parentName:"li"},".apply")," method (modern spread operator is supported)"),(0,i.kt)("li",{parentName:"ul"},"marking properties as non-enumerable etc"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"==")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"!=")," operators (other than ",(0,i.kt)("inlineCode",{parentName:"li"},"== null"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"undefined"),"); please use ",(0,i.kt)("inlineCode",{parentName:"li"},"===")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"!=="))))}c.isMDXComponent=!0}}]);